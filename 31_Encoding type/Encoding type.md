嵌入式科普(30)一文了解嵌入式涉及的各类型编码
===
[toc]

# 一、概述
- 我们在[嵌入式科普(24)一张图真正看懂USB通信协议](https://mp.weixin.qq.com/s/ht_U2p3R6O4_cwm_D7kXyw)提到了usb编码是NRZI和8b/10b；在stm32 usart也有NRZ编码
- 本文从数据编码扩展到嵌入式领域。
  **核心内容：数据编码、字符编码、调制编码和信道编码**
- 各类型编码的常见举例



# 二、各类型编码对比表



| **分类**       | **编码方式**         | **特点**                                   | **应用场景**                     | **优点**                                   | **缺点**                                   |
|----------------|----------------------|--------------------------------------------|----------------------------------|--------------------------------------------|--------------------------------------------|
| **数据编码**    | NRZ                  | 高电平1，低电平0                           | **串行通信UART IIC SPI CAN 485**              | 简单高效                                   | 时钟恢复困难                               |
|                | NRZI                 | 电平翻转表示1，保持不变表示0               | **USB2.0**                       | 抗干扰能力强                               | 实现复杂度较高                             |
|                | 曼彻斯特编码         | 每个比特周期中间有跳变                     | **十兆以太网 RFID**                     | 自带时钟信息，抗干扰能力强                 | 带宽利用率低                               |
|                | 4B/5B                | 4位数据映射为5位编码                       | **百兆以太网**                         | 提高带宽利用率                             | 需要额外编码表                             |
|                | 8B/10B               | 8位数据映射为10位编码                      | **千兆以太网 PCIe USB3.0**      | 平衡直流分量，适合高速通信                 | 编码效率较低                               |
| **字符编码**    | ASCII                | 7位编码，128个字符                         | **英语文本**                         | 简单通用                                   | 仅支持英文字符                             |
|                | GBK                  | 双字节编码，支持中文字符                   | **中文环境**                         | 适合中文                                   | 与其他编码不兼容                           |
|                | UTF-8                | 变长编码，支持全球字符                     | **国际化应用**                       | 兼容ASCII，支持多语言                      | 中文字符占用存储空间较大                   |
| **调制编码**    | ASK                  | 改变载波幅度                               | **433/315MHz RFID**                     | 实现简单                                   | 抗噪声能力差                               |
|                | FSK                  | 改变载波频率                               | **红外遥控  RFID**               | 抗干扰能力强                               | 带宽利用率低                               |
|                | PSK                  | 改变载波相位                               | 数字电视、卫星通信               | 带宽利用率高                               | 实现复杂度较高                             |
| **信道编码**    | 奇偶校验             | 添加一个奇偶校验位                         | **简单数据校验**                    | 实现简单                                   | 只能检测单比特错误                         |
|                | 汉明码               | 多个校验位检测和纠正错误                   | 内存纠错                         | 纠错能力强                                 | 实现复杂度较高                             |
|                | CRC                  | 多项式除法生成校验码                       | **数据帧校验**                       | 检测能力强                                 | 只能检错，不能纠错                         |


# 三、数据编码
数据编码是将数字数据转换为适合传输或存储的信号形式。
- （1）NRZ（Non-Return-to-Zero）
```
数据:   1   0   1   1   0   0   1   0
信号:  ───┐   ┌───┐   ┌───────┐   ┌──
          └───┘   └───┘       └───┘
```

特点：高电平表示1，低电平表示0。

应用：串行通信、存储介质。

优点：简单高效。

缺点：长串0或1时时钟恢复困难。

- （2）NRZI（Non-Return-to-Zero Inverted，不归零反转编码）
```
数据:   1   0   1   1   0   0   1   0
信号:  ───┐       ┌───┐           ┌──
          └───────┘   └───────────┘
```

特点：1：电平翻转（从高到低或从低到高）。0：电平保持不变。

应用：如 USB（通用串行总线）协议中使用 NRZI 编码。如硬盘、磁带等存储设备中使用 NRZI 编码。

优点：实现简单，适合高速数据传输。

缺点：如果数据中有长串0，电平保持不变，可能导致接收端无法正确恢复时钟。

- （3）曼彻斯特编码（Manchester Encoding）
```
数据:   1   0   1   1   0   0   1   0
信号:  ─┐ ┌─┐ ─┐ ─┐ ┌─┐ ┌─┐ ─┐ ┌─
         └─┘ └─┘ └─┘ └─┘ └─┘ └─┘
```

特点：每个比特周期中间有跳变，1表示高到低，0表示低到高。

应用：以太网、RFID。

优点：自带时钟信息，抗干扰能力强。

缺点：带宽利用率低。

- （4）4B/5B 编码
```
数据:   0101 (4位)
编码:   01011 (5位)
```
特点：将4位数据映射为5位编码，确保足够的跳变。

应用：光纤通信（如FDDI）。

优点：提高带宽利用率。

缺点：需要额外的编码表。

- （5）8B/10B 编码
```
数据:   01010101 (8位)
编码:   0101010101 (10位)
```

特点：将8位数据映射为10位编码，平衡直流分量。

应用：PCIe、USB。

优点：适合高速串行通信。

缺点：编码效率较低。


# 四、字符编码
字符编码是将字符映射为计算机可以存储和处理的二进制数据。

- （1）ASCII
```
字符:   A
二进制: 01000001
```
特点：7位编码，128个字符。

应用：英语文本。

优点：简单通用。

缺点：仅支持英文字符。

- （2）GBK
```
字符:   中
二进制: 11010101 11010101
```
特点：双字节编码，支持中文字符。

应用：中文环境。

优点：适合中文。

缺点：与其他编码不兼容。

- （3）UTF-8
```
  字符:   中
二进制: 11100100 10111000 10101101
```
特点：变长编码，支持全球字符。

应用：国际化应用。

优点：兼容ASCII，支持多语言。

缺点：中文字符占用存储空间较大。

- （4）Unicode
特点：全球统一字符集。

应用：国际化文本处理。

优点：支持所有语言字符。

缺点：存储空间较大。

# 五、调制编码
调制编码是将数字信号转换为模拟信号的过程。

- （1）ASK（幅移键控）
```
数据:   1   0   1
信号:  ───┐   ┌───
          └───┘
```
特点：通过改变载波幅度表示数据。

应用：简单无线通信。

优点：实现简单。

缺点：抗噪声能力差。

- （2）FSK（频移键控）
```
数据:   1   0   1
信号:  ───┐   ┌───
          └───┘
```
特点：通过改变载波频率表示数据。

应用：无线通信、红外遥控。

优点：抗干扰能力强。

缺点：带宽利用率低。

- （3）PSK（相移键控）
```
数据:   1   0   1
信号:  ───┐   ┌───
          └───┘
```
特点：通过改变载波相位表示数据。

应用：数字电视、卫星通信。

优点：带宽利用率高。

缺点：实现复杂度较高。

- （4）QAM（正交幅度调制）
```
数据:   1   0   1
信号:  ───┐   ┌───
          └───┘
```
特点：同时改变载波的幅度和相位。

应用：有线电视、Wi-Fi。

优点：带宽利用率极高。

缺点：对噪声敏感。

# 六、信道编码
信道编码是为了提高数据传输的可靠性，通常通过添加冗余信息来实现纠错和检错。

- （1）奇偶校验（Parity Check）
```
数据:   1   0   1   1   0   0   1
校验位: 0
```
特点：添加一个奇偶校验位。

应用：简单数据校验。

优点：实现简单。

缺点：只能检测单比特错误。

- （2）汉明码（Hamming Code）
```
数据:   1   0   1   1
编码:   1   0   1   1   0   1   0
```
特点：通过多个校验位检测和纠正错误。

应用：内存纠错。

优点：纠错能力强。

缺点：实现复杂度较高。

- （3）CRC（循环冗余校验）
```
数据:   1   0   1   1   0   0   1
CRC:    1   0   1
```
特点：通过多项式除法生成校验码。

应用：数据帧校验。

优点：检测能力强。

缺点：只能检错，不能纠错。

- （4）LDPC码（低密度奇偶校验码）
特点：基于稀疏矩阵的纠错编码。

应用：5G通信、卫星通信。

优点：纠错性能极佳。

缺点：实现复杂度高。

# 七、总结
- 还有Wi-Fi、Zigbee、BLE（蓝牙低功耗）、433/315MHz、4G 和 5G 等无线通信的编码方式和调制方式
- 在半导体或编程世界中只有0和1，0代表关/低，1代表开/高。但各类型编码复杂的很。